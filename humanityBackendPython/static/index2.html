<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>HUMANITY</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.reflowhq.com/v1/toolkit.min.css">
    <link rel="stylesheet" href="assets/css/swiper-icons.css">
    <link rel="stylesheet" href="assets/css/Projects-Grid-images.css">
    <link rel="stylesheet" href="assets/css/Simple-Slider-swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/Simple-Slider.css">
    <link rel="stylesheet" href="assets/css/styles.css">

    <!-- ADDED THIS FOR FIRST SECTION -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <style>
        .item-card {
            max-width: 300px;
            /* Set a fixed width for uniformity */
            margin: 1rem;
            /* Add some margin around each card */
            border: 1px solid #ddd;
            /* Optional: add a border */
            border-radius: 0.5rem;
            /* Optional: add border radius */
            overflow: hidden;
            /* Ensure content stays within bounds */
        }

        .item-image {
            width: 100%;
            /* Make image fill the card width */
            height: 200px;
            /* Fixed height for uniformity */
            object-fit: cover;
            /* Crop image to fit */
        }

        .pagination {
            display: flex;
            /* Use flexbox for pagination layout */
            justify-content: center;
            /* Center the buttons */
            margin-top: 1rem;
            /* Space above pagination */
        }

        .pagination button {
            margin: 0 0.5rem;
            /* Space between buttons */
        }
    </style>

</head>

<body>
    <!-- <nav class="navbar navbar-expand-lg shadow-sm navbar-light">
        <div class="container"><a class="navbar-brand" href="index.html"><img src="assets/img/Humanity%20Logo.jpg" width="50em" height="50em">HUMANITY</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="giftout.html">Gift Out</a></li>
                    <li class="nav-item"><a class="nav-link active" href="profile.html">Profile</a></li>
                    <li class="nav-item"><a class="nav-link active" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link active" href="login.html">Login</a></li>
                </ul>
                               
            </div>
        </div>
    </nav> -->


    <nav class="navbar navbar-expand-lg shadow-sm navbar-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="assets/img/Humanity%20Logo.jpg" width="50em" height="50em"> HUMANITY
            </a>
            <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1">
                <span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="login.html">Login</a>
                    </li>
                    <!-- These links will be hidden initially -->
                    <div class="logged-in-links" style="display: none;">
                        <li class="nav-item">
                            <a class="nav-link active" href="giftout.html">Gift Out</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="profile.html">Profile</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="about.html">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="index.html" onclick="logout()">Log out</a>
                        </li>
                    </div>
                </ul>
            </div>
        </div>
    </nav>


    <!-- <div class="simple-slider">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat;"><img src="assets/img/crysis3-11-guide4games.com-.jpg"></div>
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat;"></div>
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat;"></div>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
    </div> -->


    <!-- replaced the top part -->

    <!-- ADDED THIS FOR FIRST SECTION -->
    <div class="simple-slider">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide h-50">
                    <img src="assets/img/donate1.jpg" style="width:100%; height:100%;" class="h-50">
                </div>
                <div class="swiper-slide h-50">
                    <img src="assets/img/donate2.jpg" style="width:100%; height: 100%;" class="h-50">

                </div>

            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>

            <!-- Text and Button on top of the images -->
            <div class="register-button-container"
                style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; z-index: 10; display: none;">
                <p style="font-size: 24px; font-weight: bold; color: black;">Register to get the chance of giving out
                    items and getting items</p>
                <a href="/static/register.html" class="btn btn-primary"
                    style="padding: 10px 20px; font-size: 18px;">Register Now</a>
            </div>
        </div>
    </div>

    <div class="container-xxl py-5">
        <div class="container">
            <div class="row g-5">
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.1s" style="min-height: 400px;">
                    <div class="position-relative h-100">
                        <img class="img-fluid position-absolute w-100 h-100" src="assets/img/about.jpg" alt=""
                            style="object-fit: cover;">
                    </div>
                </div>
                <div class="col-lg-6 wow fadeInUp" data-wow-delay="0.3s">
                    <h6 class="section-title bg-white text-start text-primary pe-3">About Us</h6>
                    <h1 class="mb-4">Welcome to HUMANITY</h1>
                    <p class="mb-4">This is where you help make a better world.
                        is not damaged</p>
                    <p class="mb-4">By committin to this duty of the world, you help make the world safer.</p>
                    <div class="row gy-2 gx-4 mb-4">
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Donate to people of your
                                community, to make the world better place to live in</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Online Classes</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>International Certificate
                            </p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Skilled Instructors</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>Online Classes</p>
                        </div>
                        <div class="col-sm-6">
                            <p class="mb-0"><i class="fa fa-arrow-right text-primary me-2"></i>International Certificate
                            </p>
                        </div>
                    </div>
                    <a class="btn btn-primary py-3 px-5 mt-2" href="">Read More</a>
                </div>
            </div>
        </div>
    </div>


    <div class="container mt-5">
        <div class="row">
            <div class="col-md-12">
                <h1 class="mb-4">Available Gifts</h1>
                <div data-reflow-type="product-list" data-reflow-order="date_desc"></div>
            </div>
        </div>
        <div class="row">
            <div class="col-6">
                <div class="display-6">
                     <label for="location" class="form-label fw-semibold fs-5">Enter Location</label>
                        <select class="form-select mb-4" id="location">
                            <option selected disabled>Choose Location</option>
                            <option value="Jumapo">Jumapo</option>
                            <option value="Suhyen">Suhyen</option>
                            <option value="Okrase">Okrase</option>
                            <option value="Poly Junction">Poly Junction</option>
                            <option value="Mile 50">Mile 50</option>
                            <option value="Jackson Park">Jackson Park</option>
                        </select>
                </div>
            </div>
        </div>
    </div>

    <!-- Container to display images -->
    <div id="image-container" class="row">

    </div>

        <!-- LIST OF GIFTS HERE -->
        <div class="row mt-5" >
            <div class="col-12">
                <div class="card" style="width: 100em;">
                    <!-- <div class="row">
                        
                        <div class="col-6">
                            <img src="assets/img/girlpic.jpg" class="card-img-top rounded-end-3 float-end" alt="...">
                        </div>
                    </div> -->



                    <!-- <div class="card-body">
                      <h5 class="card-title">Shirts</h5>
                      <p class="card-text ">Shirts at Dansoman.</p>
                      <a href="#" class="btn btn-primary ">0549231075</a>
                    </div> -->


                </div>
            </div>
        </div>

        <div id="item-container" class="d-flex flex-wrap justify-content-center"></div>

        <div class="pagination">
            <button id="prev-btn" class="btn btn-secondary" style="display: none;">Previous</button>
            <button id="next-btn" class="btn btn-secondary" style="display: none;">Next</button>
        </div>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4"></div>
            <div class="col-4"></div>
        </div>
    </div>

    <footer class="text-center text-white" style="background-color: #3f51b5">
        <!-- Grid container -->
        <div class="container">
            <!-- Section: Links -->
            <section class="mt-5">
                <!-- Grid row-->
                <div class="row text-center d-flex justify-content-center pt-5">
                    <!-- Grid column -->
                    <div class="col-md-2">
                        <h6 class="text-uppercase font-weight-bold">
                            <a href="index.html" class="text-white text-decoration-none">Home</a>
                        </h6>
                    </div>
                    <!-- Grid column -->

                    <!-- Grid column -->
                    <div class="col-md-2">
                        <h6 class="text-uppercase font-weight-bold">
                            <a href="giftout.html" class="text-white text-decoration-none">Gift Out</a>
                        </h6>
                    </div>
                    <!-- Grid column -->

                    <!-- Grid column -->
                    <div class="col-md-2">
                        <h6 class="text-uppercase font-weight-bold">
                            <a href="profile.html" class="text-white text-decoration-none">Profile</a>
                        </h6>
                    </div>
                    <!-- Grid column -->

                    <!-- Grid column -->
                    <div class="col-md-2">
                        <h6 class="text-uppercase font-weight-bold">
                            <a href="about.html" class="text-white text-decoration-none">About</a>
                        </h6>
                    </div>
                    <!-- Grid column -->


                    <!-- Grid column -->
                </div>
                <!-- Grid row-->
            </section>
            <!-- Section: Links -->

            <hr class="my-5" />

            <!-- Section: Text -->
            <section class="mb-5">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-8">
                        <p>
                            At HUMANITY, we pride ourselves as being the best Humanitariran institution
                            ensuring that everybody in <b>Koforidua </b> is a winner and blessing by sharing their extra
                            or unused
                            items to those in need.
                        </p>
                    </div>
                </div>
            </section>

        </div>
        <!-- Grid container -->

        <!-- Copyright -->
        <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
            Â© 2024 Copyright:
            <a class="text-white text-decoration-none" href="https://facebook.com/theokhay">humanity.com</a>
        </div>
        <!-- Copyright -->
    </footer>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdn.reflowhq.com/v1/toolkit.min.js" data-reflow-project="267418190"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/Simple-Slider-swiper-bundle.min.js"></script>
    <script src="assets/js/Simple-Slider.js"></script>

    <!-- ADDED THIS FOR FIRST SECTION -->
    
    <!-- ADDED THIS FOR FIRST SECTION -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
        // Initialize Swiper with auto-sliding functionality
        var swiper = new Swiper('.swiper-container', {
            loop: true, // Enable looping
            autoplay: {
                delay: 3000, // Change image every 3 seconds
                disableOnInteraction: false, // Autoplay won't stop when user interacts
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });
    </script>

<!-- for nav -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Simulating login status
        const isLoggedIn = localStorage.getItem('isLoggedIn');
        
        if (isLoggedIn === 'true') {
            // Show logged-in links
            document.querySelector('.logged-in-links').style.display = 'flex';
            document.querySelector('.nav-login-item').style.display = "none";
            // Function to check if the confirmation message should be shown
            function showLoginMessage() {
            // Check local storage to see if the message has been shown before
            const messageShown = localStorage.getItem('loginMessageShown');

            // If the message hasn't been shown before or localStorage is empty
            if (!messageShown) {
                // Show the confirmation message
                const confirmation = confirm("Kindly ensure the removal of any unavailable items. Thank you. :)");

                // Store the flag in local storage to track that the message has been shown
                localStorage.setItem('loginMessageShown', 'true');
            }
        }

        // Call this function once the user logs in
        showLoginMessage();


        }
        else{
            document.querySelector('.register-button-container').style.display = 'flex';
        }

        // Example of setting login status (you should call this after successful login)
        document.querySelector('.nav-link[href="login.html"]').addEventListener('click', function() {
            // After login success, set the login status and refresh the page
            localStorage.setItem('isLoggedIn', 'true');
            window.location.reload();
        });
    });
</script>


<!-- for pagenation -->
<script>

    let currentPage = 1;
    const itemsPerPage = 5;
    let allItems = [];
    
    async function fetchAllItems() {
        const response = await fetch('/item/get_all_items_with_images');
        const data = await response.json();
        allItems = data; // Store all items/item/get_all_items_with_images
        renderItems();
        updatePagination();
    }
//     {
//     "id": "045b675c-a24f-47b2-97e1-950c249d8c97",
//     "name": "djksd",
//     "description": "kalsd",
//     "phone_number": "4356789",
//     "image": null,
//     "image_filename": null
//   },
    function renderItems() {
        const container = document.getElementById('item-container');
        container.innerHTML = ''; // Clear existing items
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        console.info(allItems)
        const itemsToDisplay = allItems.slice(startIndex, endIndex);
    
        itemsToDisplay.forEach(item => {
            const card = `
                <div class="item-card">
                    <img src="${item.image}" class="item-image" alt="${item.name}">
                    <div class="card-body"uuid.UUID>
                        <h5 class="card-title">${item.name}</h5>
                        <p class="card-text">${item.description}</p>
                        <a href="item_page.html?id=${item.id}" class="btn btn-primary">Get Item</a>
                    </div>
                </div>
            `;
            container.innerHTML += card;
        });
    }
    
    function updatePagination() {
        const totalPages = Math.ceil(allItems.length / itemsPerPage);
        document.getElementById('prev-btn').style.display = currentPage > 1 ? 'block' : 'none';
        document.getElementById('next-btn').style.display = currentPage < totalPages ? 'block' : 'none';
    }
    
    document.getElementById('prev-btn').addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderItems();
            updatePagination();
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', () => {
        const totalPages = Math.ceil(allItems.length / itemsPerPage);
        if (currentPage < totalPages) {
            currentPage++;
            renderItems();
            updatePagination();
        }
    });
    
    // Initial fetch
    fetchAllItems();
</script>


<!-- for getting image by location -->
<script>
    // Function to fetch and display filtered images from the backend based on the selected location
    async function fetchImagesByLocation(location) {

        let items = [];
        try {
            // Send a request to the backend to get images for the selected location
            const response = await fetch(`/item/get_all_items_with_images_by_location/${location}`);
            
            // Parse the JSON response
            items = await response.json();
            console.info("items : ", items)

            // Get the container where the images will be displayed
            const imageContainer = document.getElementById('image-container');
            
            // Clear any previous images
            imageContainer.innerHTML = '';

            // Check if there is any data returned
            if (items.length === 0) {
                imageContainer.innerHTML = '<p>No images available for this location.</p>';
                return;
            }

            // Loop through the received data and display the images
            items.forEach(item => {
                const imageHTML = `
                    <div class="col-md-4">
                        <div class="card">
                            <img src="${item.image}" alt="${item.name}" class="card-img-top">
                            <div class="card-body">
                                <h6 class="card-title"><small>Name :</small>${item.name}</h6>
                                <h6 class="card-title"><small>Description :</small>${item.description}</h6>
                                <h6 class="card-title"><small>Location :</small>${item.location}</h6>
                            </div>
                        </div>
                    </div>
                `;
                imageContainer.innerHTML += imageHTML;
            });
        } catch (error) {
            console.error('Error fetching images:', error);
            document.getElementById('image-container').innerHTML = '<p>Error loading images.</p>';
        }
    }

    // Event listener for location selection
    document.getElementById('location').addEventListener('change', function() {
        const selectedLocation = this.value; // Get the selected location
        fetchImagesByLocation(selectedLocation); // Fetch and display images from the backend
    });
</script>

<script>
    function logout() {
    // Clear the localStorage
    localStorage.clear();
    
    // Optionally, set loginStatus to false if that's what you're tracking
    localStorage.setItem('loginStatus', 'false');uuiuuid.UUIDd.UUID
    
    localStorage.removeItem('loginMessageShown');
    // Redirect to the index page
    window.location.href = 'index.html';
}

</script>

</body>

</html>