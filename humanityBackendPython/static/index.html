<!DOCTYPE html>
<html data-bs-theme="light" lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>HUMANITY</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdn.reflowhq.com/v1/toolkit.min.css">
    <link rel="stylesheet" href="assets/css/swiper-icons.css">
    <link rel="stylesheet" href="assets/css/Projects-Grid-images.css">
    <link rel="stylesheet" href="assets/css/Simple-Slider-swiper-bundle.min.css">
    <link rel="stylesheet" href="assets/css/Simple-Slider.css">
    <link rel="stylesheet" href="assets/css/styles.css">

    <!-- ADDED THIS FOR FIRST SECTION -->
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

    <style>
        .item-card {
        max-width: 300px; /* Set a fixed width for uniformity */
        margin: 1rem; /* Add some margin around each card */
        border: 1px solid #ddd; /* Optional: add a border */
        border-radius: 0.5rem; /* Optional: add border radius */
        overflow: hidden; /* Ensure content stays within bounds */
    }

    .item-image {
        width: 100%; /* Make image fill the card width */
        height: 200px; /* Fixed height for uniformity */
        object-fit: cover; /* Crop image to fit */
    }

    .pagination {
        display: flex; /* Use flexbox for pagination layout */
        justify-content: center; /* Center the buttons */
        margin-top: 1rem; /* Space above pagination */
    }

    .pagination button {
        margin: 0 0.5rem; /* Space between buttons */
    }
    </style>

</head>

<body>
    <!-- <nav class="navbar navbar-expand-lg shadow-sm navbar-light">
        <div class="container"><a class="navbar-brand" href="index.html"><img src="assets/img/Humanity%20Logo.jpg" width="50em" height="50em">HUMANITY</a><button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1"><span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item"><a class="nav-link active" href="index.html">Home</a></li>
                    <li class="nav-item"><a class="nav-link active" href="giftout.html">Gift Out</a></li>
                    <li class="nav-item"><a class="nav-link active" href="profile.html">Profile</a></li>
                    <li class="nav-item"><a class="nav-link active" href="about.html">About</a></li>
                    <li class="nav-item"><a class="nav-link active" href="login.html">Login</a></li>
                </ul>
                               
            </div>
        </div>
    </nav> -->


    <nav class="navbar navbar-expand-lg shadow-sm navbar-light">
        <div class="container">
            <a class="navbar-brand" href="index.html">
                <img src="assets/img/Humanity%20Logo.jpg" width="50em" height="50em"> HUMANITY
            </a>
            <button data-bs-toggle="collapse" class="navbar-toggler" data-bs-target="#navcol-1">
                <span class="visually-hidden">Toggle navigation</span><span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navcol-1">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link active" href="index.html">Home</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="login.html">Login</a>
                    </li>
                    <!-- These links will be hidden initially -->
                    <div class="logged-in-links" style="display: none;">
                        <li class="nav-item">
                            <a class="nav-link active" href="giftout.html">Gift Out</a>
                        </li>
                        <!-- <li class="nav-item">
                            <a class="nav-link active" href="profile.html">Profile</a>
                        </li> -->
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="profileDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                Profile
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="profileDropdown">
                                <li><a class="dropdown-item" href="profile.html#editProfile">Edit Profile</a></li>
                                <li><a class="dropdown-item" href="profile.html#editItems">Edit Items</a></li>
                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link active" href="about.html">About</a>
                        </li>

                        <li class="nav-item">
                            <a class="nav-link active" href="index.html" onclick="logout()">Log out</a>
                        </li>
                        
                    </div>
                </ul>
            </div>
        </div>
    </nav>


    <!-- <div class="simple-slider">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat;"><img src="assets/img/crysis3-11-guide4games.com-.jpg"></div>
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat;"></div>
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat;"></div>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
        </div>
    </div> -->

<!-- ADDED THIS FOR FIRST SECTION -->
    <div class="simple-slider">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat; position: relative;">
                    <img src="assets/img/indexSectionImage1.png" style="width: 100%; height: auto;">
                </div>
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat; position: relative;">
                    <img src="assets/img/indexSection2.jpg" style="width: 100%; height: auto;">

                </div>
                <div class="swiper-slide" style="background: url(&quot;https://cdn.bootstrapstudio.io/placeholders/1400x800.png&quot;) center center / cover no-repeat; position: relative;">
                    <img src="assets/img/indexSection3.webp" style="width: 100%; height: auto;">
                </div>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-prev"></div>
            <div class="swiper-button-next"></div>
    
            <!-- Text and Button on top of the images -->
            <div class="register-button-container" style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; color: white; z-index: 10; display: none;">
                <p style="font-size: 24px;font-weight: bold;color: #050e32;background-color: #b2d9eb">Register to get the chance of giving out items and getting items</p>
                <a href="/static/register.html" class="btn btn-primary" style="padding: 10px 20px;font-size: 18px;position: relative;top: 70px;right: 320px;">Register Now</a>
            </div>
        </div>
    </div>
    
<!--  -->


    <div class="container mt-5">
        <div class="row">
            <div class="col-md-12">
                <h1 class="mb-4">Available Gifts</h1>
                <div data-reflow-type="product-list" data-reflow-order="date_desc"></div>
            </div>
        </div>
        
        <!-- LIST OF GIFTS HERE -->
        <!-- <div class="row mt-5">
            <div class="col-md-12">
                <div class="card" style="width: 40rem;"> -->
                    <!-- <div class="row">
                        
                        <div class="col-6">
                            <img src="assets/img/girlpic.jpg" class="card-img-top rounded-end-3 float-end" alt="...">
                        </div>
                    </div> -->
                    
                    
                    
                    <!-- <div class="card-body">
                      <h5 class="card-title">Shirts</h5>
                      <p class="card-text ">Shirts at Dansoman.</p>
                      <a href="#" class="btn btn-primary ">0549231075</a>
                    </div> -->

<!-- 
                  </div>
            </div>
        </div> -->

        <div id="item-container" class="d-flex flex-wrap justify-content-center"></div>

        <div class="pagination">
            <button id="prev-btn" class="btn btn-secondary" style="display: none;">Previous</button>
            <button id="next-btn" class="btn btn-secondary" style="display: none;">Next</button>
        </div>
    </div>

    <div class="container mt-5">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4"></div>
            <div class="col-4"></div>
        </div>
    </div>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="https://cdn.reflowhq.com/v1/toolkit.min.js" data-reflow-project="267418190"></script>
    <script src="assets/js/bs-init.js"></script>
    <script src="assets/js/Simple-Slider-swiper-bundle.min.js"></script>
    <script src="assets/js/Simple-Slider.js"></script>

    <!-- ADDED THIS FOR FIRST SECTION -->
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
        // Initialize Swiper with auto-sliding functionality
        var swiper = new Swiper('.swiper-container', {
            loop: true, // Enable looping
            autoplay: {
                delay: 3000, // Change image every 3 seconds
                disableOnInteraction: false, // Autoplay won't stop when user interacts
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
        });
    </script>

<!-- for nav -->
<script>
    document.addEventListener('DOMContentLoaded', function() {
        // Simulating login status
        const isLoggedIn = localStorage.getItem('isLoggedIn');

        if (isLoggedIn === 'true') {
            // Show logged-in links
            document.querySelector('.logged-in-links').style.display = 'flex';

            // Function to check if the confirmation message should be shown
            function showLoginMessage() {
            // Check local storage to see if the message has been shown before
            const messageShown = localStorage.getItem('loginMessageShown');

            // If the message hasn't been shown before or localStorage is empty
            if (!messageShown) {
                // Show the confirmation message
                const confirmation = confirm("Kindly ensure the removal of any unavailable items. Thank you. :)");

                // Store the flag in local storage to track that the message has been shown
                localStorage.setItem('loginMessageShown', 'true');
            }
        }

        // Call this function once the user logs in
        showLoginMessage();


        }
        else{
            document.querySelector('.register-button-container').style.display = 'flex';
        }

        // Example of setting login status (you should call this after successful login)
        document.querySelector('.nav-link[href="login.html"]').addEventListener('click', function() {
            // After login success, set the login status and refresh the page
            localStorage.setItem('isLoggedIn', 'true');
            window.location.reload();
        });
    });
</script>


<!-- for pagenation -->
<script>

    let currentPage = 1;
    const itemsPerPage = 5;
    let allItems = [];
    
    async function fetchAllItems() {
        const response = await fetch('/item/get_all_items_with_images');
        const data = await response.json();
        allItems = data; // Store all items/item/get_all_items_with_images
        renderItems();
        updatePagination();
    }
//     {
//     "id": "045b675c-a24f-47b2-97e1-950c249d8c97",
//     "name": "djksd",
//     "description": "kalsd",
//     "phone_number": "4356789",
//     "image": null,
//     "image_filename": null
//   },
    function renderItems() {
        const container = document.getElementById('item-container');
        container.innerHTML = ''; // Clear existing items
        
        const startIndex = (currentPage - 1) * itemsPerPage;
        const endIndex = startIndex + itemsPerPage;
        console.info(allItems)
        const itemsToDisplay = allItems.slice(startIndex, endIndex);
    
        itemsToDisplay.forEach(item => {
            const card = `
                <div class="item-card">
                    <img src="${item.image}" class="item-image" alt="${item.name}">
                    <div class="card-body"uuid.UUID>
                        <h5 class="card-title">${item.name}</h5>
                        <p class="card-text">${item.description}</p>
                        <a href="item_page.html?id=${item.id}" class="btn btn-primary">Get Item</a>
                    </div>
                </div>
            `;
            container.innerHTML += card;
        });
    }
    
    function updatePagination() {
        const totalPages = Math.ceil(allItems.length / itemsPerPage);
        document.getElementById('prev-btn').style.display = currentPage > 1 ? 'block' : 'none';
        document.getElementById('next-btn').style.display = currentPage < totalPages ? 'block' : 'none';
    }
    
    document.getElementById('prev-btn').addEventListener('click', () => {
        if (currentPage > 1) {
            currentPage--;
            renderItems();
            updatePagination();
        }
    });
    
    document.getElementById('next-btn').addEventListener('click', () => {
        const totalPages = Math.ceil(allItems.length / itemsPerPage);
        if (currentPage < totalPages) {
            currentPage++;
            renderItems();
            updatePagination();
        }
    });
    
    // Initial fetch
    fetchAllItems();
</script>

<script>
    function logout() {
    // Clear the localStorage
    localStorage.clear();
    
    // Optionally, set loginStatus to false if that's what you're tracking
    localStorage.setItem('loginStatus', 'false');uuiuuid.UUIDd.UUID
    
    localStorage.removeItem('loginMessageShown');
    // Redirect to the index page
    window.location.href = 'index.html';
}

</script>


</body>

</html>