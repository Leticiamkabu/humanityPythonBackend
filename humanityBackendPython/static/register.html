<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Register Account</title>
  <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
</head>
<body>
  <!-- Section: Design Block -->
  <section class="text-center text-lg-start">
    <style>
      .cascading-right {
        margin-right: -50px;
      }

      @media (max-width: 991.98px) {
        .cascading-right {
          margin-right: 0;
        }
      }
      .main {
        margin:6em;
      }
    </style>

    <!-- Jumbotron -->
    <div class="container py-4 main">
      <div class="row g-0 align-items-center">
        <div class="col-lg-6 mb-5 mb-lg-0">
          <div class="card cascading-right bg-body-tertiary" style="backdrop-filter: blur(30px);">
            <div class="card-body p-5 shadow-5 text-center">
              <h2 class="fw-bold mb-5">Sign up now</h2>
              <form id="registerForm">
                <!-- 2 column grid layout with text inputs for the first and last names -->
                <div class="row">
                  <div class="col-md-6 mb-4">
                    <div data-mdb-input-init class="form-outline">
                      <input type="text" id="form3Example1" name="first_name" class="form-control" required />
                      <label class="form-label" for="form3Example1">First name</label>
                    </div>
                  </div>
                  <div class="col-md-6 mb-4">
                    <div data-mdb-input-init class="form-outline">
                      <input type="text" id="form3Example2" name="last_name" class="form-control" required />
                      <label class="form-label" for="form3Example2">Last name</label>
                    </div>
                  </div>
                </div>

                <!-- Email input -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <input type="email" id="form3Example3" name="email" class="form-control" required />
                  <label class="form-label" for="form3Example3">Email address</label>
                </div>

                <div data-mdb-input-init class="form-outline mb-4">
                  <input type="text" id="form3Example4" name="phone_number" class="form-control" required />
                  <label class="form-label" for="form3Example4">Phone number</label>
                </div>

                <!-- Password input -->
                <div data-mdb-input-init class="form-outline mb-4">
                  <input type="password" id="form3Example5" name="password" class="form-control" required />
                  <label class="form-label" for="form3Example5">Password</label>
                </div>

                <!-- Checkbox -->
                <div class="form-check d-flex justify-content-center mb-4">
                  <input class="form-check-input me-2" type="checkbox" value="" id="form2Example33" checked />
                  <label class="form-check-label" for="form2Example33">
                    Subscribe to our newsletter
                  </label>
                </div>

                <a href="login.html" style="padding-right:50%;margin-bottom: 5em; text-decoration:none;">Back</a>
                <a href="javascript:void(0);" onclick="registerAsAdmin()" style="padding-right:5px;margin-bottom: 5em; text-decoration:none;">Register As Admin</a>
                <!-- Submit button -->
                <button type="submit" class="btn btn-primary btn-block mb-4">
                  Sign up
                </button>
              </form>
            </div>
          </div>
        </div>

        <div class="col-lg-6 mb-5 mb-lg-0">
          <img src="assets/img/girlpic.jpg" class="w-100 rounded-4 shadow-4" alt="" />
        </div>
      </div>
    </div>
    <!-- Jumbotron -->
  </section>
  <!-- Section: Design Block -->

  <footer class="text-center text-white" style="background-color: #3f51b5">
    <!-- Grid container -->
    <div class="container">
      <!-- Section: Links -->
      <section class="mt-5">
        <div class="row text-center d-flex justify-content-center pt-5">
          <div class="col-md-2">
            <h6 class="text-uppercase font-weight-bold">
              <a href="index.html" class="text-white text-decoration-none">Home</a>
            </h6>
          </div>

          <div class="col-md-2">
            <h6 class="text-uppercase font-weight-bold">
              <a href="giftout.html" class="text-white text-decoration-none">Gift Out</a>
            </h6>
          </div>

          <div class="col-md-2">
            <h6 class="text-uppercase font-weight-bold">
              <a href="profile.html" class="text-white text-decoration-none">Profile</a>
            </h6>
          </div>

          <div class="col-md-2">
            <h6 class="text-uppercase font-weight-bold">
              <a href="about.html" class="text-white text-decoration-none">About</a>
            </h6>
          </div>
        </div>
      </section>
      
      <hr class="my-5" />

      <!-- Section: Text -->
      <section class="mb-5">
        <div class="row d-flex justify-content-center">
          <div class="col-lg-8">
            <p>
              At HUMANITY, we pride ourselves as being the best Humanitarian institution ensuring that everybody in <b>Koforidua</b> is a winner and blessing by sharing their extra or unused items to those in need.
            </p>
          </div>
        </div>
      </section>
    </div>

    <!-- Copyright -->
    <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2)">
      Â© 2024 Copyright:
      <a class="text-white text-decoration-none" href="https://facebook.com/theokhay">humanity.com</a>
    </div>
  </footer>

  <!-- <script>
    document.getElementById('registerForm').addEventListener('submit', async function(event) {
      event.preventDefault();

      const form = document.getElementById('registerForm');
      const formData = new FormData(form);

      // Print the form data being sent to the backend
      // for (let [key, value] of formData.entries()) {
      //   console.log(`${key}: ${value}`);
      // }

      try {
        for (let [key, value] of formData.entries()) {
        console.log(`${key}: ${value}`);
      }

        const response = await fetch('/auth/create_user', { // Use your local backend URL
          method: 'POST',
          body: formData
        });

        if (!response.ok) {
          throw new Error('Failed to submit form');
        }

        const result = await response.json();
        console.log('Success:', result);

        // Handle the success, e.g., redirect to login
        window.location.href = 'login.html';
      } catch (error) {
        console.error('Error:', error);
        alert('There was an error submitting the form. Please try again.');
      }
    });
  </script> -->

  <script>
    document.addEventListener('DOMContentLoaded', function() {
        document.getElementById('registerForm').addEventListener('submit', async function(event) {
            event.preventDefault();

            const form = document.getElementById('registerForm');
            const formData = new FormData(form);

            // Print the form data being sent to the backend
            for (let [key, value] of formData.entries()) {
                console.log(`${key}: ${value}`);
            }

            try {
                const response = await fetch('/auth/create_user', {
                    method: 'POST',
                    body: formData
                });

                if (!response.ok) {
                    throw new Error('Failed to submit form');
                }

                const result = await response.json();
                console.log('Success:', result);

                // Handle the success, e.g., redirect to login
                window.location.href = 'login.html';
            } catch (error) {
                console.error('Error:', error);
                alert('There was an error submitting the form. Please try again.');
            }
        });
    });
</script>

<script>
  // Define the function to handle the button click
async function registerAsAdmin() {
    try {
        // Send a POST request to your backend endpoint
        const response = await fetch('/auth/create_admin', {
            method: 'POST',
            
            
        });

        // Check if the response is ok
        if (response.ok) {
            const data = await response.json(); // If your backend returns JSON
            alert('Successfully registered as admin!');
            console.log('Response:', data);

            // Redirect to the index page
            window.location.href = 'admin.html';
        } else {
            // Handle errors
            console.error('Error:', response.status);
            alert('Failed to register as admin.');
        }
    } catch (error) {
        // Handle fetch errors
        console.error('Error:', error);
        alert('An error occurred while registering.');
    }

     
}

</script>

  <script src="assets/bootstrap/js/bootstrap.min.js"></script>
</body>
</html>
